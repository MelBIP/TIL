## Socket.IO
---
# μ†μΌ“μ΄λ€?

- μ†μΌ“ β†’ ν”„λ΅ν† μ½, ipμ£Όμ†, ν¬νΈ λ„λ²„λ΅ μ •μλ¨
- λ–¨μ–΄μ Έμλ” λ‘ νΈμ¤νΈλ¥Ό μ—°κ²°ν•΄μ£Όλ” λ„κµ¬λ΅μ¨ μΈν„°νμ΄μ¤ μ—­ν• .
- λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›μ„ μ μλ” κµ¬μ΅°μ²΄λ΅ μ†μΌ“μ„ ν†µν•΄ λ°μ΄ν„° ν†µλ΅κ°€ λ§λ“¤μ–΄μ§.
- μ†μΌ“μ μ—­ν• μ— λ”°λΌ ν΄λΌμ΄μ–ΈνΈ μ†μΌ“, μ„λ²„μ†μΌ“μΌλ΅ κµ¬λ¶„λ¨.

ν”„λ΅ν† μ½κ³Ό ipμ£Όμ†, ν¬νΈ λ„λ²„λ΅ λ–¨μ–΄μ Έμλ” λ‘ λ°”μ΄μ¤λ¥Ό μ—°κ²°ν•΄μ£Όλ” μ—­ν• 

# WebSocketμ΄λ€?

**μ›Ήμ†μΌ“μ€ λ°μ΄ν„°κ°€ λ„λ½λμ§€ μ•κ² ν•λ” tcp κΈ°λ°μ μ–‘λ°©ν–¥ ν†µμ‹ μ„ μ κ³µν•λ” μ»΄ν“¨ν„° ν”„λ΅ν† μ½**

HTTP ν†µμ‹ μ€ λ‹¨λ°©ν–¥ λ°©μ‹μ΄κ³  μ—°κ²°μ΄ μ μ§€κ°€ μ• λκΈ° λ•λ¬Έμ— λ§¤λ² μ—…λ°μ΄νΈ μ /λ¬΄λ¥Ό ν™•μΈν•κΈ° μ„ν•΄μ„ μ„λ²„μ— μ”μ²­μ„ λ¶λ¬μ™€μ•Ό ν•¨. κ·Έλ¦¬κ³  μ”μ²­μ„ ν•  λ•λ§λ‹¤ μ „μ²΄ λ°μ΄ν„°λ¥Ό λ¶λ¬μ¤κ² λ¨. κ·Έλ ‡κΈ° λ•λ¬Έμ— μ„λ²„μ— λ§μ€ λ¶€ν•κ°€ μƒκΈ°κ² λ¨.

ν•μ§€λ§ μ›Ήμ†μΌ“μ€ μ–‘λ°©ν–¥ ν†µμ‹ μ„ μ§€μ›ν•κ² λμ–΄ μκ³  λ μ„λ²„μ™€μ μ—°κ²°μ΄ μ μ§€λ μƒνƒμ—μ„ λ°μ΄ν„°κ°€ μ¤κ° μ μκ² ν•΄μ£ΌκΈ° λ•λ¬Έμ— μ‹¤μ‹κ°„ λ°μ΄ν„° μ „μ†΅μ΄ κ°€λ¥ν•κ² λ¨. μ΄λ΄ λ• μ›Ήμ†μΌ“μ„ μ΄μ©ν•λ‹¤κ³  μƒκ°ν•λ©΄ λ¨.

**κ°„λ‹¨ν μ”μ•½ν•μλ©΄ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°λμ–΄ μλ” μƒνƒλ¥Ό λ§λ“¤μ–΄ μ£ΌκΈ° μ„ν•΄μ„ μ‚¬μ©ν•λ‹¤κ³  μƒκ°ν•λ©΄ λ¨.**

**μ΄ μ›Ήμ†μΌ“μ„ κ°λ°μλ“¤μ΄ λ”μ± νΈλ¦¬ν•κ² κ°λ°ν•κΈ° μ„ν•΄μ„ λ§λ“¤μ–΄μ§„ κ²ƒμ΄ Node.jsμ socket.io λ¨λ“μ΄λΌκ³  μƒκ°ν•λ©΄ λ¨.** 

Socket.IOμ νΉμ§•μΌλ΅λ” μ΄λ²¤νΈ κΈ°λ° + μ„λ²„ μ†μΌ“κ³Ό ν΄λΌμ΄μ–ΈνΈ μ†μΌ“μ„ μ—°κ²°ν•μ—¬μ„ μ‹¤μ‹κ°„μΌλ΅ μ–‘λ°©ν–¥ ν†µμ‹ μ΄ κ°€λ¥ν•¨.

## Socket.io

β†’ Socket.IOλ” μ›Ή μ†μΌ“ μ—°κ²°μ„ ν†µν•΄ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°„μ— μ‹¤μ‹κ°„ μ–‘λ°©ν–¥ ν†µμ‹ μ„ κ°€λ¥ν•κ² ν•λ” JavaScript λΌμ΄λΈλ¬λ¦¬.

# Socket.IO μ£Όμ” κ°λ…

### π’¬Β Socket.IO κΈ°λ³Έ κ°λ…

1. `Socket` : μ†μΌ“μ€ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ μ—°κ²°μ„ λ‚νƒ€λƒ„. μ†μΌ“μ„ μ‚¬μ©ν•μ—¬ μ‹¤μ‹κ°„μΌλ΅ λ°μ΄ν„°λ¥Ό λ³΄λ‚΄κ³  λ°›μ„ μ μμ.
2. `Server` : μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ™€μ μ†μΌ“ μ—°κ²°μ„ μ„¤μ •ν•κ³  κ΄€λ¦¬ν•¨. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈλ΅ μ΄λ²¤νΈλ¥Ό λ°©μ¶ν•κ±°λ‚ ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° μ΄λ²¤νΈλ¥Ό μμ‹ ν•  μ μμ.
3. `Client` : ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ™€μ μ†μΌ“ μ—°κ²°μ„ μ„¤μ •ν•κ³  κ΄€λ¦¬ν•¨. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ™€ λ™μΌν•κ² μ„λ²„λ΅ μ΄λ²¤νΈλ¥Ό λ°©μ¶ν•κ±°λ‚ μ„λ²„μ—μ„ μ΄λ²¤νΈλ¥Ό μμ‹ ν•  μ μμ.

### π’¬Β Socket.IO νΈλν”½ κ²©λ¦¬ κµ¬λ¶„

1. `Event` : μ΄λ²¤νΈλ” μ†μΌ“ μ—°κ²°μ„ ν†µν•΄ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°„μ— μ „μ†΅λ λ©”μ„Έμ§€. μ΄λ²¤νΈ μ΄λ¦„μ€ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ™μΌν•κ² μ„ μ–Έν•μ—¬μ•Ό ν•¨. (JSON, λ¬Έμμ—΄, μ΄μ§„ λ“± λ¨λ“  ν•μ‹μ λ°μ΄ν„° ν¬ν•¨ κ°€λ¥)
2. `Namespace` : λ„¤μ„ μ¤νμ΄μ¤λ” ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ λ³„λ„μ ν†µμ‹  μ±„λ„. λ‹¨μΌ μ„λ²„μ—μ„ μ—¬λ¬ λ„¤μ„ μ¤νμ΄μ¤λ¥Ό μ‘μ„±ν•  μ μμΌλ©°, ν΄λΌμ΄μ–ΈνΈλ” νΉμ • λ„¤μ„ μ¤νμ΄μ¤μ— μ—°κ²°ν•μ—¬ ν•΄λ‹Ή λ„¤μ„ μ¤νμ΄μ¤μ λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈμ—κ²λ§ μ΄λ²¤νΈλ¥Ό μμ‹ ν•κ±°λ‚ λ°©μ¶ν•  μ μμ.
3. `Room` : λ£Έμ€ ν•¨κ» κ²°ν•©λ μ†μΌ“ κ·Έλ£Ή. μ†μΌ“μ€ μ—¬λ¬ λ£Έμ— ν•©λ¥ν•κ±°λ‚ λ– λ‚  μ μμ. λ£Έμ€ μ—°κ²°λ λ¨λ“  κ³ κ°μ—κ² λ°©μ†΅ν•λ” λ€μ‹  νΉμ • ν΄λΌμ΄μ–ΈνΈ κ·Έλ£Ήμ— λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄λ”λ° μ μ©ν•¨.

### π’¬Β Socket.IO μ΄λ²¤νΈ μ†΅μμ‹  λ°©μ‹

1. `Public` : Publicμ€ μ—°κ²°λ λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² λ©”μ‹μ§€κ°€ μ „μ†΅λλ” κ²½μ°. Socket.IOμ—μ„ io.emit μ—°κ²° λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² λ©”μ‹μ§€λ¥Ό λΈλ΅νΈ μΊμ¤νΈν• λ°©λ²•μΌλ΅, μ±„ν… λ©”μ‹μ§€μ™€ κ°™μ€ μΌλ° λ©”μ‹μ§€λ¥Ό μ—°κ²°λ λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚΄λ”λ° μ μ©ν•¨.
    
    ```swift
    // μ„λ²„ μΈ΅
    io.on('connection', (socket) => {
      socket.on('chat message', (msg) => {
        io.emit('chat message', msg); 
        
    // μ—°κ²°λ λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² λ©”μ‹μ§€ ν†µμ‹ (λΈλ΅λ“ μΊμ¤νΈ)
      });
    });
    
    // ν΄λΌμ΄μ–ΈνΈ μΈ΅ 
    socket.on('chat message', (msg) => {
      console.log(`Received message: ${msg}`);
    });
    ```
    
2. `Private` : Privateμ€ νΉμ • ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚Ό λ•. Socket.IOμ—μ„ socket.emit νΉμ • ν΄λΌμ΄μ–ΈνΈμ—κ² λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄λ” λ°©λ²•μΌλ΅, μ•λ¦Ό λλ” μ•λ¦Όκ³Ό κ°™μ€ κ°μ„ λ©”μ‹μ§€λ¥Ό νΉμ • ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚΄λ”λ° μ μ©.
    
    ```swift
    // μ„λ²„ μΈ΅
    io.on('connection', (socket) => {
      socket.on('send notification', (msg, recipientId) => {
        io.to(recipientId).emit('notification', msg); 
    
    // μ§€μ •λ μμ‹ μμ—κ² λ©”μ‹μ§€ λ³΄λ‚΄κΈ°
      });
    });
    
    // ν΄λΌμ΄μ–ΈνΈ μΈ΅ 
    socket.on('notification', (msg) => {
      console.log(`Received notification: ${msg}`);
    });
    ```
    
3. `Broadcasting` : Broadcatingμ€ λ°μ‹ μ μ μ™Έ λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² λ©”μ‹μ§€κ°€ μ „μ†΅λλ” κ²½μ°. Socket.IOμ—μ„ socket.broadcast.emit λ°μ‹ μλ¥Ό μ μ™Έν• λ¨λ“  μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈμ—κ² λ©”μ‹μ§€λ¥Ό λΈλ΅λ“ μΊμ¤νΈν•λ” λ°©λ²•μΌλ΅, λ°μ‹ μλ¥Ό μ μ™Έν• λ¨λ“  μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈμ—κ² μ‚¬μ©μ μ΅°μΈ λλ” μΆ…λ£μ™€ κ°™μ€ μ•λ¦Όμ„ λ³΄λ‚΄λ”λ° μ μ©.
    
    ```swift
    // μ„λ²„ μΈ΅ 
    io.on('connection', (socket) => {
      socket.on('user join', (username) => {
        socket.broadcast.emit('new user', username); 
    
    // λ°μ‹ μλ¥Ό μ μ™Έν• μ—°κ²°λ λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² λ©”μ‹μ§€ ν†µμ‹ (λΈλ΅λ“ μΊμ¤νΈ)
      });
    });
    
    // ν΄λΌμ΄μ–ΈνΈ μΈ΅ 
    socket.on('new user', (username) => {
      console.log(`New user joined: ${username}`);
    });
    ```
    

### π’¬Β Socket.IO μ΄λ²¤νΈ μ†΅μμ‹  κ°λ…

1. `Emit` : ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ λλ” μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ΄λ²¤νΈλ¥Ό λ³΄λ‚΄λ”λ° μ‚¬μ©. μ΄λ²¤νΈ μ΄λ¦„κ³Ό λ³΄λ‚Ό λ°μ΄ν„°λΌλ” λ‘ κ°€μ§€ μ΄μƒμ μΈμκ°€ ν•„μ”ν•¨.
    
    ```swift
    //μ²« λ²μ§Έ μΈμλ” μ΄λ²¤νΈ μ΄λ¦„, λ‘ λ²μ§Έ μΈμλ” μ „μ†΅λ  λ°μ΄ν„°
    socket.emit('chat message', 'Hello, world!');
    ```
    
2. `To` : νΉμ • μ†μΌ“μ΄λ‚ λ°©μ— μ΄λ²¤νΈλ¥Ό λ°©μ¶ν•λ”λ° μ‚¬μ©. μ΄λ²¤νΈκ°€ μ „μ†΅λ  μ†μΌ“ ID λλ” λ°© μ΄λ¦„μ΄λΌλ” ν•λ‚μ μΈμκ°€ ν•„μ”ν•¨. 
    
    ```swift
    // to λ©”μ†λ“λ” μ΄λ²¤νΈλ¥Ό λ³΄λ‚Ό μ†μΌ“ IDλ¥Ό μ§€μ •ν•λ” λ° μ‚¬μ©
    io.to('12345').emit('chat message', 'Hello, world!');
    ```
    
3. `On` : ν΄λΌμ΄μ–ΈνΈ λλ” μ„λ²„μ—μ„ μ΄λ²¤νΈμ— λ€ν• λ¦¬μ¤λ„λ¥Ό λ“±λ΅ν•λ”λ° μ‚¬μ©. μ΄λ²¤νΈ μ΄λ¦„κ³Ό μ΄λ²¤νΈλ¥Ό μ²λ¦¬ν•κΈ° μ„ν• μ½λ°± ν•¨μλΌλ” λ‘ κ°€μ§€ μ΄μƒμ μΈμκ°€ ν•„μ”ν•¨.
    
    ```swift
    //μ²« λ²μ§Έ μΈμλ” μ΄λ²¤νΈ μ΄λ¦„, λ‘ λ²μ§Έ μΈμλ” μ΄λ²¤νΈκ°€ μμ‹  λ  λ• νΈμ¶λλ” μ½λ°± ν•¨μ(λ°μ΄ν„°)
    socket.on('chat message', (message) => {
      console.log(`Received message: ${message}`);
    });
    ```
    
4. `Of` : μμ²΄ μ†μΌ“ λ° μ΄λ²¤νΈ μ„ΈνΈλ΅ μƒ λ„¤μ„ μ¤νμ΄μ¤λ¥Ό λ§λ“λ”λ° μ‚¬μ©. λ„¤μ„ μ¤νμ΄μ¤μ μ΄λ¦„μ΄λΌλ” ν•λ‚μ μΈμκ°€ ν•„μ”ν•¨.
    
    ```swift
    // of λ©”μ†λ“λ” μƒλ΅μ΄ λ„¤μ„ μ¤νμ΄μ¤λ¥Ό λ§λ“λ” λ° μ‚¬μ©
    const chatNamespace = io.of('/chat');
    ```
    

# Socket.IO μ‘λ™ λ°©μ‹
**β†’ Socket.IOλ” ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°„μ— WebSocket μ—°κ²°μ„ μ„¤μ •ν•μ—¬ μ‘λ™ν•¨.**

μ„λ²„λ” λ“¤μ–΄μ¤λ” μ—°κ²°μ„ ν™•μΈν•κ³  ν΄λΌμ΄μ–ΈνΈκ°€ λ°©μ¶ν•λ” μ΄λ²¤νΈλ¥Ό μ²λ¦¬ν•¨. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„λ¥Ό μ—°κ²°ν•κ³  μ΄λ²¤νΈλ¥Ό ν™•μΈν•κ±°λ‚ μ΄λ²¤νΈλ¥Ό ν™•μΈν•  μ μμ. ν΄λΌμ΄μ–ΈνΉνƒ€ μ΄λ²¤νΈλ¥Ό λ°©μ¶ν•λ©΄ μ„λ²„λ” μ΄λ²¤νΈλ¥Ό μμ‹ ν•μ—¬ ν΄λΌμ΄μ–ΈνΈλ΅ μ‘λ‹µμ„ λ‹¤μ‹ λ³΄λ‚΄κ±°λ‚ λ™μΌν• λ„¤μ„ μ¤νμ΄μ¤ λλ” λ°©μ— μλ” λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈλ΅ μ΄λ²¤νΈλ¥Ό λΈλ΅λ“ μΊμ¤νΈ ν•  μ μμ.

# Socket.IOμ—μ„ setTimeoutμ„ νΈμ¶ν•΄μ•Ό ν•λ” μ΄μ ?

β†’ Socket.IOμ μ£Όμ” κΈ°λ¥ μ¤‘ ν•λ‚λ” λ§μ€ μμ μ—°κ²° λ° μ΄λ²¤νΈλ¥Ό λ™μ‹μ— μ²λ¦¬ν•  μ μλ‹¤λ” κ²ƒμ„. κ·Έλ¬λ‚ μ λ€λ΅ κ΄€λ¦¬ν•μ§€ μ•μΌλ©΄ μ„±λ¥ λ¬Έμ κ°€ λ°μƒν•  μ μμ.

**μ„±λ¥ λ¬Έμ λ¥Ό ν”Όν•λ” ν• κ°€μ§€ λ°©λ²•μ€ `SetTimeout`κ³Ό `Socket.IO`λ¥Ό ν•¨κ» μ‘λ™ν•λ” κ²ƒμ„.**

setTimeout μ§€μ •λ μ‹κ°„μ΄ μ§€λ‚ ν›„μ— κΈ°λ¥μ„ μ‹¤ν–‰ν•  μ μλ” λ‚΄μ¥ JavaScript κΈ°λ¥μΌλ΅ Socket.IOμ—μ„ setTimeout μ΄λ²¤νΈλ¥Ό λ°›μ€ ν›„ ν΄λΌμ΄μ–ΈνΈμ—κ² μΉμΈμ„ λ³΄λ‚΄λ” λ“± νΉμ • κΈ°λ¥μ μ‹¤ν–‰μ„ μ§€μ—°μ‹ν‚¤λ©΄ μ„λ²„μ— λ„λ¬΄ λ§μ€ μ΄λ²¤νΈκ°€ λ™μ‹μ— κ³Όλ¶€ν™”λλ” κ²ƒμ„ λ°©μ§€ν•  μ μμ.

```swift
// μ„λ²„ μΈ΅
socket.on('message', (data, callback) => {

// μ²λ¦¬ μν–‰
  setTimeout(() => {
    callback('success');
  }, 1000); // ν™•μΈμ„ λ³΄λ‚΄κΈ° μ „μ— 1μ΄κ°„ κΈ°λ‹¤λ¦¬κΈ°
});

// ν΄λΌμ΄μ–ΈνΈ μΈ΅ 
socket.emit('message', data, (response) => {
  console.log(response); // 1μ΄ ν›„ 'μ„±κ³µ' λ΅κ·Έ κΈ°λ΅
});
```

# WebSocket vs Socket.IO

μ• μ΄μ— λ‘μ€ λ‹¤λ¥Έ κ°λ…. μ›Ήμ†μΌ“μ€ μ–‘λ°©ν–¥ μ†ν†µμ„ μ„ν• ν”„λ΅ν† μ½. ν”„λ΅ν† μ½μ€ μ‰½κ² λ§ν•λ©΄ λ‹¤λ¥Έ μ»΄ν“¨ν„°λΌλ¦¬ μ†ν†µν•κΈ° μ„ν• μ•½μ†μ΄λΌκ³  μ΄ν•΄ν•λ©΄ λ¨.

λ°λ©΄μ—, socket.ioλ” μ–‘λ°©ν–¥ ν†µμ‹ μ„ ν•κΈ° μ„ν•΄ μ›Ήμ†μΌ“ κΈ°μ μ„ ν™μ©ν•λ” λΌμ΄λΈλ¬λ¦¬. μ–΄μ°λ³΄λ©΄ μλ°”μ¤ν¬λ¦½νΈμ™€ jQueryμ κ΄€κ³„μ™€ λΉ„μ·ν•λ‹¤κ³  ν•  μ μμ.

κ·Έλ ‡κΈ° λ•λ¬Έμ— socket.ioκ°€ κ°™μ€ κΈ°λ¥μ„ κµ¬ν„ν•λ”λΌλ„ μ•½κ°„ λλ¦¬μ§€λ§, λ§μ€ νΈμμ„±μ„ μ κ³µν•¨. λν• Java, C++, Python λ“± μ—¬λ¬ μ–Έμ–΄λ“¤μ λΌμ΄λΈλ¬λ¦¬ λν• μ§€μ›λ¨.

### WebSocket

- HTML5 μ›Ή ν‘μ¤€ κΈ°μ 
- λ§¤μ° λΉ λ¥΄κ² μ‘λ™ν•λ©° ν†µμ‹ ν•  λ• μ•„μ£Ό μ μ€ λ°μ΄ν„°λ¥Ό μ΄μ©ν•¨.
- μ΄λ²¤νΈλ¥Ό λ‹¨μν λ“£κ³ , λ³΄λ‚΄λ” κ²ƒλ§ κ°€λ¥

### Socket.IO

- ν‘μ¤€ κΈ°μ μ΄ μ•„λ‹λ©°, λΌμ΄λΈλ¬λ¦¬μ„.
- μ†μΌ“ μ—°κ²° μ‹¤ν¨ μ‹ fallbackμ„ ν†µν•΄ λ‹¤λ¥Έ λ°©μ‹μΌλ΅ μ•μ•„μ„ ν•΄λ‹Ή ν΄λΌμ΄μ–ΈνΈμ™€ μ—°κ²°μ„ μ‹λ„ν•¨.
- λ°© κ°λ…μ„ μ΄μ©ν•΄ μΌλ¶€ ν΄λΌμ΄μ–ΈνΈμ—κ²λ§ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ” λΈλ΅λ“μΊμ¤ν…μ΄ κ°€λ¥ν•¨.