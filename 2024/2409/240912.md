# iOS 공부
## UNUserNotificationCenter
---
**UNUserNotificationCenter**
- UNUserNotificationCenter는 앱 혹은 앱 확장에서 발생하는 알림 관련 활동들을 관리할 수 있는 중앙 객체.
- 앱에서 관련된 기능을 다루기 위해서는 우선 권한을 요청해야 함.
- options에 필요한 권한을 포함시켜 전달하고, 그 결과를 completionHandler로 받아 추가 작업을 수행.
- options에 포함시킬 수 있는 권한
  - **badge**
    - badge - 앱아이콘 오른쪽 위에 표기되는 알림 개수
  - **sound**
  - **alert**
  - **carPlay**
  - **criticalAlert**
  - **providersAppNotificationSettings**
  - **provisional**
- 싱글톤 객체를 제공하기 때문에 이를 활용하면 됨.
  - 싱글톤 패턴 - 특정 클래스의 인스턴스를 1개만 생성되는 것을 보장하는 디자인 패턴. 즉, 생성자를 통해서 여러 번 호출이 되더라도 인스턴스를 새로 생성하지 않고 최초 호출 시에 만들어두었떤 인스턴스를 재활용하는 패턴
- 여기에 UNNotificationRequest 객체를 추가해서 알림을 설정함.

**UNMutableNotificationContent**
- 알림의 내용을 설정할 수 있는 객체.
- **title**, **subtitle**, **body**, **badge**, **sound** 등을 설정할 수 있음.

**UNNotificationTrigger**
- 알림을 트리거하는 조건에 대한 패턴을 정의할 수 있는 추상 클래스.
- 이에 대한 구체타입으로는 아래 4가지가 존재함.
  - **UNTimeIntervalNotificationTrigger**
    ```swift
    // Fire in 30 minutes (60 seconds times 30)
    let trigger = UNTimeIntervalNotificationTrigger(timeInterval: (30*60), repeats: false)
    ```
    - 설정한 timeInterval 값이 지나면 알림을 트리거함.
  - **UNCalendarNotificationTrigger**
    ```swift
    var date = DateComponents()
    date.hour = 8
    date.minute = 30 
    let trigger = UNCalendarNotificationTrigger(dateMatching: date, repeats: true)
    ```
    - 특정 날짜 혹은 시간에 알림을 트리거함.
    - 내부 값으로는 DataComponet 객체를 활용함
  - **UNLocationNotificationTrigger**
    ```swift
    let center = CLLocationCoordinate2D(latitude: 37.335400, longitude: -122.009201)
    let region = CLCircularRegion(center: center, radius: 2000.0, identifier: "Headquarters")
    region.notifyOnEntry = true
    region.notifyOnExit = false
    let trigger = UNLocationNotificationTrigger(region: region, repeats: false)
    ```
    - 특정 지역에 도착했을 때 알림을 트리거함.
  - **UNPushNotificationTrigger**
    - Apple Push Notification Service (APNs)에서 알림을 보냈을 때 알림을 트리거함.
    - 사용자가 직접 해당 클래스를 생성하여 사용할 일은 없음.

**UNNotificationRequest**
- 알림을 요청하는 핵심객체. 
- 내부에 UNMutableNotificationContent 및 UNNotificationTrigger가 포함됨.
- identifier도 포함되기 때문에 추후 UNUserNotificationCenter에서 이를 기반으로 알림 삭제도 가능함.
