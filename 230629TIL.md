## 230629

### RxFlow

: Reactive Flow Coordinator íŒ¨í„´ì„ ê¸°ë°˜ìœ¼ë¡œí•˜ëŠ” iOS ì•±ì„ ìœ„í•œ navigation í”„ë ˆì„ì›Œí¬

iOS ì•± ë‚´ navigationì—ëŠ” 2ê°€ì§€ ì„ íƒì´ ìˆìŒ

1. Builtin mechanism : Apple ë° Xcodeì—ì„œ ì œê³µí•˜ëŠ” ì‚¬ìš© â€” storyboards, segues
2. custom mechanism : ì½”ë“œì—ì„œ ì§ì ‘ êµ¬í˜„

[ë‹¨ì ]

- Builtin mechanism : navigationì€ ìƒëŒ€ì ìœ¼ë¡œ ì •ì (static)ì´ê³  ìŠ¤í† ë¦¬ë³´ë“œëŠ” ê±°ëŒ€í•¨(massive) navigationì½”ë“œëŠ” UIViewControllerë¥¼ ì˜¤ì—¼ì‹œí‚´
- custom mechanism : ì½”ë“œê°€ ì–´ë ¤ì›Œì§ˆ ìˆ˜ ìˆìœ¼ë©° ì„ íƒí•œ ë””ìì¸ íŒ¨í„´(Router, Coordinator)ì— ë”°ë¼ ë³µì¡ í•  ìˆ˜ ìˆìŒ

**RxFlowì˜ ëª©í‘œ**

- UIViewControllerì˜ collaborationê³¼ reusabilityë¥¼ ê°€ëŠ¥í•˜ê²Œ í•˜ê¸° ìœ„í•´ storyboardsë¥¼ ì›ì ë‹¨ìœ„ë¡œ ì»·íŒ…í•¨
- navigation contextì— ë”°ë¼ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ UIViewControllerë¥¼ í‘œì‹œí•  ìˆ˜ ìˆê²Œ ë¨
- ì¢…ì†ì„± ì£¼ì… êµ¬í˜„ ìš©ì´í•˜ê²Œ í–ˆìŒ
- UIViewControllerì—ì„œ ëª¨ë“  navigation mechanism ì œê±°
- ëŒ€ë¶€ë¶„ì˜ navigation caseë¥¼ í•´ê²°í•˜ë©´ì„œ ì„ ì–¸ì  ë°©ì‹(declarative way)ìœ¼ë¡œ navigationì„ í‘œí˜„
- ì•±ì„ ë…¼ë¦¬ì  navigation blockìœ¼ë¡œ ì‰½ê²Œ ì ˆë‹¨

**ì•Œì•„ì•¼ í•  ë‹¨ì–´ë“¤**

**Flow**Â : ê° FlowëŠ” ì•± ë‚´ì˜ Navigation ì˜ì—­ì„ ì •ì˜ navigation actionì„ ì„ ì–¸í•˜ëŠ” ê³³

**Step**Â : ê° Stepì€ ì•±ì˜ navigation state Flowì™€ Stepì˜ ì¡°í•©ì€ ê°€ëŠ¥í•œ ëª¨ë“  navigation actionì„ ì„¤ëª…

Stepì€ Flowì— ì„ ì–¸ëœ í™”ë©´ìœ¼ë¡œ ì „íŒŒë  ë‚´ë¶€ ê°’(ID, URLë“±)ì„ í¬í•¨í•  ìˆ˜ ìˆìŒ

**Stepper**Â : Stepì„ ìƒì„±í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ê²ƒ StepperëŠ” Flowë‚´ ëª¨ë“  navigation actionì„ íŠ¸ë¦¬ê±°í•  ì±…ì„ì´ ìˆìŒ

**Presentable**Â : í‘œí˜„í•  ìˆ˜ ìˆëŠ” ê²ƒì˜ ì¶”ìƒí™”(ê¸°ë³¸ì ìœ¼ë¡œ UIViewControllerì™€ FlowëŠ” Presentableì„) Presentableì€ UIKit í˜¸í™˜ ë°©ì‹ìœ¼ë¡œ Flow Stepì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ Coordinatorê°€ êµ¬ë…í•  Reactive observablesì„ ì œê³µ

**Flowable**Â : Presentableê³¼ Stepperë¥¼ ê²°í•©í•œ ê°„ë‹¨í•œ ë°ì´í„° êµ¬ì¡° Coordinatorì—ê²Œ Reactive mechanismì•ˆì—ì„œ ìƒˆë¡œìš´ Stepì„ ìƒì„±í•  ë‹¤ìŒ ë‹¨ê³„ë¥¼ ì•Œë ¤ì¤Œ

**Coordinator**Â : ê°œë°œìê°€ navigation ê°€ëŠ¥ì„±(possibilities)ì„ ë‚˜íƒ€ë‚´ëŠ” Flowì™€ Stepì˜ ì ì ˆí•œ ì¡°í•©ì„ ì •ì˜í•˜ë©´, CoordinatorëŠ” ì´ëŸ¬í•œ ì¡°í•©ì„ ì¼ê´€ëœ ë°©ì‹ìœ¼ë¡œ í˜¼í•©í•¨

**Step ì •ì˜í•˜ê¸°**

RxFlowì—ì„œ Stepì€ enumìœ¼ë¡œ í‘œí˜„ë¨

Stepì„ ì •ì˜í•  ë•Œ ê°€ì¥ ì£¼ì˜í•´ì•¼ í•  ë¶€ë¶„ì€ step caseë¥¼ ê°€ëŠ¥í•œ í•œ ë…ë¦½ì ìœ¼ë¡œ ìœ ì§€í•˜ëŠ” ê²ƒì„

**Flow ì •ì˜í•˜ê¸°**

navigate(to:) í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ì—¬ Stepì„ navigation actinìœ¼ë¡œ transformí•¨

FlowëŠ” ViewControllerë¥¼ ì¸ìŠ¤í„´ìŠ¤í™” í•  ë•Œ dependency injectionì„ êµ¬í˜„í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŒ

> **ğŸ’¡ FlowëŠ” ì—¬ëŸ¬ê°œê°€ ì •ì˜ë  ìˆ˜ ìˆìŒ**
> 

**Stepper ì •ì˜í•˜ê¸°**

> Stepì„ ìƒì„±í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ê²ƒ
StepperëŠ” Flowë‚´ ëª¨ë“  navigation actionì„ íŠ¸ë¦¬ê±°í•  ì±…ì„ì´ ìˆìŒ
> 

StepperëŠ” ViewModelì´ ë  ìˆ˜ë„ ìˆê³ , ViewControllerê°€ ë  ìˆ˜ ìˆìŒ

### GOMSStep

```swift
import RxFlow
import UIKit

enum GOMSStep: Step {
    
    // MARK: Auth
    case introIsRequired
    
    // MARK: TabBar
    case tabBarIsRequired
    
    // MARK: Home
    case qrocdeIsRequired
    case outingIsRequired
    case homeIsRequired
    case profileIsRequired
    
    //MARK: Alert
    case alert(title: String?, message: String?, style: UIAlertController.Style, actions: [UIAlertAction])
    case failureAlert(title: String?, message: String?, action: [UIAlertAction] = [])
    
    //MARK: Admin
    case studentInfoIsRequired
    case searchModalIsRequired
    case searchModalDismiss
    case editUserModalIsRequired(accountIdx: UUID)
    case editModalDismiss
}
```

![ì¸íŠ¸ë¡œ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4c04a756-0b98-4174-a4dd-d4aa2f0a5850/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-06-30_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_12.10.22.png)

ì¸íŠ¸ë¡œ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°

![íƒ­ ë°” í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/455e500c-baca-4644-9c33-a9f1daa5b320/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-06-30_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_12.11.08.png)

íƒ­ ë°” í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°

![QRì½”ë“œ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°, ì™¸ì¶œ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°, í™ˆ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°, í”„ë¡œí•„ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3e6e1261-a57b-46d1-8ad4-bced3c6aba0e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-06-30_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_12.11.32.png)

QRì½”ë“œ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°, ì™¸ì¶œ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°, í™ˆ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°, í”„ë¡œí•„ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°

![alertì„ í‘œì‹œí•˜ê¸° ìœ„í•œ ì¼€ì´ìŠ¤, ê²½ê³ ì°½ì— ì œëª©(title), ë©”ì‹œì§€(message), ìŠ¤íƒ€ì¼(UIAlertController.Style) ë° ì•¡ì…˜(actions)ì„ ì§€ì •í•  ìˆ˜ ìˆìŒ / ì‹¤íŒ¨ë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•œ ì¼€ì´ìŠ¤, ê²½ê³ ì°½ì— ì‹¤íŒ¨ ì œëª©(title), ì‹¤íŒ¨ ë©”ì‹œì§€(message), ê·¸ë¦¬ê³  ì‹¤íŒ¨ ì‹œ ì·¨í•  ì•¡ì…˜(action)ë“¤ì„ ì§€ì •í•  ìˆ˜ ìˆìŒ](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7895adc3-cadd-4e74-b16d-a6436ba10bce/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-06-30_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_12.12.23.png)

alertì„ í‘œì‹œí•˜ê¸° ìœ„í•œ ì¼€ì´ìŠ¤, ê²½ê³ ì°½ì— ì œëª©(title), ë©”ì‹œì§€(message), ìŠ¤íƒ€ì¼(UIAlertController.Style) ë° ì•¡ì…˜(actions)ì„ ì§€ì •í•  ìˆ˜ ìˆìŒ / ì‹¤íŒ¨ë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•œ ì¼€ì´ìŠ¤, ê²½ê³ ì°½ì— ì‹¤íŒ¨ ì œëª©(title), ì‹¤íŒ¨ ë©”ì‹œì§€(message), ê·¸ë¦¬ê³  ì‹¤íŒ¨ ì‹œ ì·¨í•  ì•¡ì…˜(action)ë“¤ì„ ì§€ì •í•  ìˆ˜ ìˆìŒ

![í•™ìƒ ì •ë³´ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°, ê²€ìƒ‰ ëª¨ë‹¬ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°, ê²€ìƒ‰ ëª¨ë‹¬ í™”ë©´ì„ ë‹«ì•„ì•¼ í•˜ëŠ” ê²½ìš°, ì‚¬ìš©ì í¸ì§‘ ëª¨ë‹¬ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°ë¡œ, ì‚¬ìš©ì ê³„ì • ì¸ë±ìŠ¤ë¥¼ í¬í•¨, í¸ì§‘ ëª¨ë‹¬ í™”ë©´ì„ ë‹«ì•„ì•¼ í•˜ëŠ” ê²½ìš°](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/80c408bc-c924-4eb5-a0ba-5e9d24f59c3d/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-06-30_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_12.14.08.png)

í•™ìƒ ì •ë³´ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°, ê²€ìƒ‰ ëª¨ë‹¬ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°, ê²€ìƒ‰ ëª¨ë‹¬ í™”ë©´ì„ ë‹«ì•„ì•¼ í•˜ëŠ” ê²½ìš°, ì‚¬ìš©ì í¸ì§‘ ëª¨ë‹¬ í™”ë©´ì´ í•„ìš”í•œ ê²½ìš°ë¡œ, ì‚¬ìš©ì ê³„ì • ì¸ë±ìŠ¤ë¥¼ í¬í•¨, í¸ì§‘ ëª¨ë‹¬ í™”ë©´ì„ ë‹«ì•„ì•¼ í•˜ëŠ” ê²½ìš°